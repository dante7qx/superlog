## MySQL安装 Windows解压版

### 一. 下载

- 1 进入官网，下载

https://dev.mysql.com/downloads/mysql/

```
Windows (x86, 64-bit), ZIP Archive
Debug Binaries & Test Suite	5.7.18	377.1M	
Download
(mysql-5.7.18-winx64-debug-test.zip)
```

- 2 点击下面的链接进行下载

https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-5.7.18-winx64-debug-test.zip

### 二. 安装

- 1 解压安装包

  例：解压到 E:\mysql-5.7.17

- 2 修改配置文件

  拷贝 my-default.ini，命名为 my.ini，修改内容如下

  <font color="red">(**my.ini文件的编码必须是英文编码（如windows中的ANSI），不能是UTF-8或GBK等**)</font>

  ```sh
  # For advice on how to change settings please see
  # http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html
  # *** DO NOT EDIT THIS FILE. It's a template which will be copied to the
  # *** default location during install, and will be replaced if you
  # *** upgrade to a newer version of MySQL.

  [client]
  default-character-set=utf8mb4

  [mysqld]
  character-set-server=utf8mb4

  # Remove leading # and set to the amount of RAM for the most important data
  # cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
  # innodb_buffer_pool_size = 128M

  # Remove leading # to turn on a very important data integrity option: logging
  # changes to the binary log between backups.
  # log_bin

  # These are commonly set, remove the # and set as required.

  port = 3306
  basedir = "E:/mysql-5.7.17/"
  datadir = "E:/mysql-5.7.17/data/"
  tmpdir  = "E:/mysql-5.7.17/data/"
  socket  = "E:/mysql-5.7.17/data/mysql.sock"
  log-error="E:/mysql-5.7.17/data/mysql_error.log"

  # server_id = .....
  # Remove leading # to set options mainly useful for reporting servers.
  # The server defaults are faster for transactions and fast SELECTs.
  # Adjust sizes as needed, experiment to find the optimal values.
  # join_buffer_size = 128M
  # sort_buffer_size = 2M
  # read_rnd_buffer_size = 2M 

  max_connections=100
  table_open_cache=256
  query_cache_size=1M
  tmp_table_size=32M
  thread_cache_size=8
  innodb_data_home_dir="E:/mysql-5.7.17/data/"
  innodb_flush_log_at_trx_commit =1
  innodb_log_buffer_size=128M
  innodb_buffer_pool_size=128M
  innodb_log_file_size=10M
  innodb_thread_concurrency=16
  innodb-autoextend-increment=1000
  join_buffer_size = 128M
  sort_buffer_size = 32M
  read_rnd_buffer_size = 32M
  max_allowed_packet = 32M
  explicit_defaults_for_timestamp=true

  sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER 
  ```

- 3 配置环境变量

  ```sh
  MYSQL_HOME=E:\mysql-5.7.17
  path=…;%MYSQL_HOME%\bin
  ```

- 4 安装MYSQL服务

  <font color="red">**在安装mysql服务时，一定要切换到mysql安装目录的bin目录下，不管你是否配置环境变量**</font>

  - 初始化数据库文件

    `mysqld  --initialize `

    ```
    在mysql_error.log中，找到root的临时密码，如下

    [Note] A temporary password is generated for root@localhost: IIbT!3cMgauP
    临时密码： IIbT!3cMgauP
    ```

  - 注册windows服务 

    *注册服务 `mysqld --install`*

    *删除服务 `mysqld --remove`*

  - 启动MYSQL服务

    `net start mysql`

    `net stop mysql`

- 5 修改root密码

  ```powershell
  mysql -uroot -pIIbT!3cMgauP

  Welcome to the MySQL monitor.  Commands end with ; or \g.
  Your MySQL connection id is 13
  Server version: 5.7.17 MySQL Community Server (GPL)

  Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.

  Oracle is a registered trademark of Oracle Corporation and/or its
  affiliates. Other names may be trademarks of their respective
  owners.

  Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

  mysql> show databases;
  mysql> use mysql;
  mysql> update mysql.user set authentication_string=password('123456') where user='root' and Host = 'localhost';
  mysql> FLUSH PRIVILEGES;
  mysql> QUIT

  或者
  ALTER USER 'root'@'localhost' IDENTIFIED BY '123456'; 
  ```

- 6 远程登录设置

  - 1 本地使用root用户登录`mysql -uroot -p123456`

  - 2 授权操作

    ```sql
    mysql>GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '123456' WITH GRANT OPTION;
    mysql>FLUSH PRIVILEGES;
    ```

- 7 MYSQL编码问题

  查看编码

  ```sql
  show variables like '%colla%';
  show variables like '%char%';
  ```

  设置编码

  - 1 命令行中修改，**只对当前服务生效**

   ```sql
  set character_set_database=utf8;  
  set character_set_server=utf8;  
   ```

  - 2 在my.ini中配置

   ```sh
  [client]
  default-character-set=utf8
  
  [mysqld]
  character-set-server=utf8
   ```

