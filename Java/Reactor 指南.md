## Reactor 指南

### 一. 前言

#### 1. 响应式编程

​	响应式编程相当于 ==数据流（data stream） +   变化传递（propagation of change） +    流式编程（Reactor）==。

- “变化传递” 就相当于果汁流水线的管道；在入口放进橙子，出来的就是橙汁；放西瓜，出来的就是西瓜。
- 橙子和西瓜、以及机器中的果肉果汁以及残渣等，都是流动的“数据流”；
- 管道的图纸是用“声明式”的语言表示的。

#### 2. 引入目的

​	在如今互联网时代的大背景下，Web应用通常要面对高并发、海量数据的挑战，性能从来都是必须要考量的核心因素。Web 应用具有 I/O 密集的特点，I/O阻塞会带来比较大的性能损失或资源浪费。

```markdown
## 阻塞和非阻塞 - 调用者的状态
  - 当调用者调用了服务提供者的方法后，如果一直在等待结果返回，否则无法执行后续的操作，那就是阻塞状态。
  - 如果调用之后直接返回，从而可以继续执行后续的操作，那可以理解为非阻塞的。
## 同步和异步 - 服务提供者的能力
  - 当调用者调用了服务提供者的方法后，如果服务提供者能够立马返回，并在处理完成后通过某种方式通知到调用者，那可以理解为异步的。
  - 只是在处理完成后才返回，或者需要调用者再去主动查询处理是否完成，就可以理解为是同步的。
```

​	如何解决这些问题？

- 并行化：使用更多的线程和硬件资源。

  ​	增加处理线程，线程中同样是阻塞的代码。但是这种使用资源的方式会迅速面临 资源竞争和并发问题。并且带来了复杂性，而且容易造成浪费。例如：数据库连接池中的连接所在线程需要进入 idle 状态等待数据，从而浪费资源。 

- 提高执行效率（异步）

  ​	编写 **异步非阻塞** 代码。Java 的异步编程 Callback、Future 不具有可读写和可编程性，并且 Java Stream是一种同步的API。

  ​	因此，需要一种**异步非阻塞**的响应式库，即 **Reactor**，它提供了 **具备“异步非阻塞”特性和“流量控制”能力的数据流，即响应式流（Reactive Stream）。**

### 二. Reactor

#### 1. 工作原理

![Reactor 原理](./Reactor 原理.png)

#### 2. 术语

### 八. 参考资料

- https://htmlpreview.github.io/?https://github.com/get-set/reactor-core/blob/master-zh/src/docs/index.html#intro-reactive
- http://chillyc.info/2017/jdk9/Java9-Flow-feature/
- http://blog.51cto.com/liukang/2090163